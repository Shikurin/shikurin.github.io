<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title> setTimeout exemple </title>
		<script>

			var intervalID;

			var canevas;
			const canevasLongueur = 600;
			const canevasLargeur = 600;

			var limites;

			var carre;
			const carreLongueur = 50;
			const carreLargeur = 50;
			var carrePosX = 0;
			var carrePosY = 0;

			function initApres2sec() {
				setTimeout(init, 2000);
			}
			
			function init() {

				intervalID = setInterval(step, 1000);

				canevas = document.getElementById("myCanvas");

				limites = canevas.getContext('2d');
				// limites.strokeRect(0, 0, canevasLongueur, canevasLargeur);

				carre = canevas.getContext('2d');
				carre.fillStyle = 'red';
				dessinerCarre();
			}
			
			function step() {
				if (carrePosX === 550) {
					// On arrête le carré s'il atteint la limite du canevas
					clearInterval(intervalID);
				} else {
					// Le carré peut avancer de 10 pixels
					effacerCarre();
					carrePosX += 10;
					dessinerCarre();
				}
			}

			function effacerCarre() {
				// On efface l'ancien carré pour donner l'impression qu'on le fait avancer
				carre.clearRect(carrePosX, carrePosY, carreLongueur, carreLargeur);
			}
			
			function dessinerCarre() {
				// On dessine le carré à partir de sa position
				carre.fillRect(carrePosX, carrePosY, carreLongueur, carreLargeur);
			}
			
		</script>
	</head>
	<body onload='initApres2sec()'>
		<canvas id="myCanvas" width="600" height="600" style="border: 1px solid">
		Désolé, votre navigateur ne prend pas en charge &lt;canvas&gt;.
		</canvas>
	</body>
</html>
